# target OUTPUT files for the whole workflow
rule all:
    input:
        "../workflow/results/scans/"

# global variable to use
COLLECTION = 'ISPY2'
SCAN = 'ISPY2: VOLSER: bi-lateral: SER'
MASK = 'ISPY2: VOLSER: bi-lateral: Analysis Mask'
PATIENT_IDS = ['ISPY2-105286']
TIMES = [0,1,2,3]
UPPERBOUND = 118
LOWERBOUND = 0

rule download_images:
    params:
        collection = COLLECTION,
        scan = SCAN,
        mask = MASK,
        patient_ids = PATIENT_IDS,
        scan_storage = "../workflow/results/scans/",
        mask_storage = "../workflow/results/masks/"
    conda:
        '/mnt/home/fesslerl/890-402/cmse_890_602_fessler_final/workflow/env/tcia_utils.yml'
    output:
        directory(expand("../workflow/results/scans/{patient_id}_{times}", patient_id=PATIENT_IDS, times=TIMES)),
        directory(expand("../workflow/results/masks/{patient_id}_{times}", patient_id=PATIENT_IDS, times=TIMES))
    script:
        "../workflow/scripts/download_images.py"


