# Ensure Snakefile is set up for testing case
Make sure the header of your Snakefile is exactly:

```
COLLECTION = 'ISPY2'
SCAN_NAME = 'ISPY2: VOLSER: bi-lateral: SER'
MASK_NAME = 'ISPY2: VOLSER: bi-lateral: Analysis Mask'

PATIENT_IDS = ['ISPY2-115638']
TIMES = [0,1,2,3]

PERM_STORAGE='../perm'
```

Other selections of these variables will produce results for other patients, scans, or collections. This will automatically cause the unit tests to fail as you compute radiomics for a non-test case. 

# Installing pytest

Create an environment for pytest with the following commands. Note we will need both snakemake and pytest in this environment.

```bash
conda create -n test_radiomics_of_ISPY -c conda-forge bioconda::snakemake=7.32.4
conda activate test_radiomics_of_ISPY
pip install pytest==7.4.3
```

# Unzipping the unit test data

The testing data is provided zipped for storage reasons. You will need to unzip to perform testing. 

```
cd workflow/.tests/unit
unzip test_data.zip
```

# Running pytest

The unit tests are the autogenerated unit test created by snakemake for the patient ISPY2-115638. As such, the directory you run pytest from needs to be correct or the tests will fail to find files. The correct directory is to be in the workflow directory. 

```bash
cd ../..
pytest .tests
```
